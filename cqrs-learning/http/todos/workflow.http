### ============================================================
### ðŸš€ WORKFLOW COMPLET - Test du flux CQRS
### ============================================================
### ExÃ©cute ces requÃªtes dans l'ordre pour tester le cycle complet
### ============================================================

@baseUrl = http://localhost:3000

### ============================================================
### Ã‰TAPE 1: VÃ©rifier que la liste est vide (ou voir les existants)
### ============================================================
# @name step1_listTodos
GET {{baseUrl}}/todos

###

### ============================================================
### Ã‰TAPE 2: CrÃ©er un premier Todo (Command: CreateTodoCommand)
### ============================================================
# @name step2_createFirst
POST {{baseUrl}}/todos
Content-Type: application/json

{
    "title": "4 Test Todo CQRS",
    "description": "Test de la commande CreateTodoCommand - 4"
}

###

### ============================================================
### Ã‰TAPE 3: CrÃ©er un deuxiÃ¨me Todo
### ============================================================
# @name step3_createSecond
POST {{baseUrl}}/todos
Content-Type: application/json

{
    "title": "DeuxiÃ¨me Todo",
    "description": "Pour tester le filtrage"
}

###

### ============================================================
### Ã‰TAPE 4: Lister tous les Todos (Query: GetTodosQuery)
### ============================================================
# @name step4_listAll
GET {{baseUrl}}/todos

###

### ============================================================
### Ã‰TAPE 5: RÃ©cupÃ©rer le premier Todo (Query: GetTodoByIdQuery)
### ============================================================
# @name step5_getById
GET {{baseUrl}}/todos/1

###

### ============================================================
### Ã‰TAPE 6: Marquer le premier comme complÃ©tÃ© (Command: UpdateTodoCommand)
### ============================================================
# @name step6_complete
PATCH {{baseUrl}}/todos/1
Content-Type: application/json

{
    "completed": true
}

###

### ============================================================
### Ã‰TAPE 7: Filtrer les complÃ©tÃ©s seulement
### ============================================================
# @name step7_filterCompleted
GET {{baseUrl}}/todos?completed=true

###

### ============================================================
### Ã‰TAPE 8: Filtrer les non-complÃ©tÃ©s
### ============================================================
# @name step8_filterNotCompleted
GET {{baseUrl}}/todos?completed=false

###

### ============================================================
### Ã‰TAPE 9: Supprimer le premier Todo (Command: DeleteTodoCommand)
### ============================================================
# @name step9_delete
DELETE {{baseUrl}}/todos/1

###

### ============================================================
### Ã‰TAPE 10: VÃ©rifier la suppression
### ============================================================
# @name step10_verifyDeletion
GET {{baseUrl}}/todos
